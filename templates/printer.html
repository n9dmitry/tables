{% extends "layout.html" %}

{% block title %}Главная страница{% endblock %}
{% block result %}

<div class="content">
    <h1>Печатник - Заказы</h1>
    <button class="btn btn-warning mt-3">Добавить</button>
    <table class="table table-bordered mt-4">
        <thead class="thead-light">
        <tr>
            <th rowspan="2">№ п/п</th>
            <th rowspan="2">№ задачи</th>
            <th rowspan="2">Дата</th>
            <th rowspan="2">Сюжет</th>
            <th rowspan="2">Материал</th>
            <th colspan="2">ПОЛЕ ПЕЧАТИ (М)</th>
            <th colspan="2">ПОЛОТНО (М)</th>
            <th colspan="3">ДОП ОПЕРАЦИИ</th>
            <th rowspan="2">Кол-во</th>
            <th rowspan="2">Исполнитель</th>
        </tr>
        <tr>
            <th>Ширина</th>
            <th>Высота</th>
            <th>Ширина</th>
            <th>Длина</th>
            <th>Люверсы</th>
            <th>Спайка</th>
            <th>Усиление</th>
        </tr>
        </thead>
        <tbody>
        {% for order in orders %}
        <tr>
            <td>{{ order.id }}</td>
            <td>{{ order.task_number }}</td>
            <td>{{ order.date.strftime("%d.%m.%Y") }}</td>
            <td>{{ order.subject }}</td>
            <td>{{ order.material }}</td>
            <td>{{ order.print_width }}</td>
            <td>{{ order.print_height }}</td>
            <td>{{ order.canvas_width }}</td>
            <td>{{ order.canvas_length }}</td>
            <td>{{ order.eyelets }}</td>
            <td>{{ order.spike }}</td>
            <td>{{ order.reinforcement }}</td>
            <td>{{ order.quantity }}</td>
            <td>{{ order.performer }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
<!-- Модальное окно -->
<div class="modal" id="orderModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="border: 2px solid #007bff; border-radius: 15px; padding: 20px;">
            <div class="modal-header">
                <h5 class="modal-title">Добавить заказ</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="orderForm" action="/orders" method="POST" style="display: flex; flex-wrap: wrap;">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label for="task_number">№ задачи</label>
                            <input type="number" class="form-control" id="task_number" name="task_number" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="date">Дата</label>
                            <input type="date" class="form-control" id="date" name="date" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="subject">Сюжет</label>
                            <input type="text" class="form-control" id="subject" name="subject" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="material">Материал</label>
                            <input type="text" class="form-control" id="material" name="material" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="print_width">Ширина (печати)</label>
                            <input type="number" class="form-control" id="print_width" name="print_width" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="print_height">Высота (печати)</label>
                            <input type="number" class="form-control" id="print_height" name="print_height" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="canvas_width">Ширина (канвас)</label>
                            <input type="number" class="form-control" id="canvas_width" name="canvas_width" step="0.01"
                                   required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="canvas_length">Длина (канвас)</label>
                            <input type="number" class="form-control" id="canvas_length" name="canvas_length"
                                   step="0.01" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="eyelets">Люверсы</label>
                            <input type="text" class="form-control" id="eyelets" name="eyelets">
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="spike">Спайка</label>
                            <input type="text" class="form-control" id="spike" name="spike">
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="reinforcement">Усиление</label>
                            <input type="text" class="form-control" id="reinforcement" name="reinforcement">
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="quantity">Кол-во</label>
                            <input type="number" class="form-control" id="quantity" name="quantity" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="performer">Исполнитель</label>
                            <input type="text" class="form-control" id="performer" name="performer" required>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                <button type="submit" class="btn btn-primary" form="orderForm">Ок</button>
            </div>
        </div>
    </div>
</div>


<script>
    // Открываем модальное окно при нажатии на кнопку "Добавить"
    document.querySelector('.btn-warning').addEventListener('click', function() {
      $('#orderModal').modal('show');
    });
</script>

{% endblock %}
